---
layout:     post
title:      查询账户总资产估值：一步掌握 Web3 钱包 API 的完整攻略
date:       2025-09-05
header-img: img/post-bg-desk.jpg
catalog: true
---

在 **Web3 资产管理** 中，快速查看 **账户总资产估值** 是最常被调用的场景之一。本文把官方文档整理成可读性更强的指引，帮你 3 分钟上手 **钱包 API / 钱包即服务 Web3 API** 的 *总估值查询接口*，并给出实战中容易忽略的细节与优化建议。

---

## 接口总览

| 信息          | 说明                                |
| ------------- | ----------------------------------- |
| 功能          | 一键计算账户维度全部或部分资产美元估值 |
| 路径          | GET `/api/v5/wallet/asset/total-value` |
| 核心关键词    | **账户总资产估值、链上信息查询、垃圾空投币过滤、Web3 钱包 API、总估值接口** |
| Token 支持范围 | ETH、BSC、Arbitrum 在内的多链资产      |
| 开发者典型场景 | 资产仪表盘、收益分析、风险监控与合规报告 |

👉 [想亲身体验链上数据秒到账？立即试用 Web3 总估值 API](https://okxdog.com/)

---

## 快速上手 · 4 步完成调用

### 1)、鉴权准备

总估值接口需要项目级鉴权，请务必提前在项目后台创建 `Project ID`，并保存以下四把“钥匙”：

- OK-ACCESS-PROJECT  
- OK-ACCESS-KEY  
- OK-ACCESS-SIGN  
- OK-ACCESS-PASSPHRASE  

> 若你对签名（SIGN）计算不熟，可把官方 SDK 拉一句 `new Sign(privateKey, passphrase, timestamp)` 即可自动生成，不必重复造轮子。

### 2)、参数组装

在浏览器地址栏或 Postman 的 **Params** 里填入如下字段即可：

| 参数名          | 是否必填 | 示例值 | 解释 |
|-----------------|----------|--------|------|
| accountId       | ✅        | e7dba4c2-666d-496a-ad92-768d29291fee | 被查询的钱包 uid |
| chains          | ❌        | eth,bsc,arb                          | 限制链范围，留空即全部扫描 |
| assetType       | ❌        | 0/1/2                                | 0=全资产(默认) 1=仅token 2=仅DeFi |
| excludeRiskToken| ❌        | true(默认)                           | 过滤垃圾空投币建议保持 true |

> 同时查询 50 条链也不会出错，但返回速度成正比下降，推荐只勾选你关注的链。

### 3)、一次完整 cURL 实战

```bash
curl --location --request GET 'https://web3.okx.com/api/v5/wallet/asset/total-value?accountId=e7dba4c2-666d-496a-ad92-768d29291fee' \
--header 'OK-ACCESS-PROJECT: 86af********d1bc' \
--header 'OK-ACCESS-KEY: 37c541a1-****-****-****-10fe7a038418' \
--header 'OK-ACCESS-SIGN: leaV********3uw=' \
--header 'OK-ACCESS-PASSPHRASE: 1****6' \
--header 'OK-ACCESS-TIMESTAMP: 2023-10-18T12:21:41.274Z'
```

### 4)、结果解析

返回 `totalValue` 字段即为美元计价：

```json
{
  "code": "0",
  "msg": "success",
  "data": [
    {
      "totalValue": "1172.895057177065864522056725546579939398"
    }
  ]
}
```

在客户端只需取 `Number(data[0]?.totalValue)`，就能一键渲染到资产卡片。

👉 [查看更多账户维度实战示例](https://okxdog.com/)

---

## 业务场景深度拆解

### 场景一：资产仪表盘实时估值

用 Websocket + 该 HTTP 接口做 **混合更新**：

- 客户端第一次打开仪表盘 → HTTP 拉总估值；
- 后续收到钱包收款/转账推送 → 只刷新对应 Token，减少全量查询。  
优化：把 `chains` 字段设为用户当前可见网络，后台压力直降 80%。

### 场景二：DeFi 资产自动筛除空投垃圾币

很多项目方为了刷活跃度，空投价值接近零的 ALT token。把 `excludeRiskToken=true` 参数固定写死，可大大节约渲染层逻辑。

### 场景三：为税务/审计生成合规报告

每 24h 跑一次脚本拉取所有账户维度资产，存储到数据库后：

- 按 `totalValue` 生成折线图；  
- 记录差额自动对齐法定汇率，做 **资产快照**，满足多地税务披露。

---

## FAQ｜高频疑问一次说清

**Q1：可以过滤高风险 Token，但如何界定“高风险”？**  
A：系统通过链上诈骗数据库、黑名单合约、历史持仓相似度等多维度打分自动标记，无需手动维护。

**Q2：若我只有 NFT，没有 ERC-20，还能用此接口吗？**  
A：可以调用 `assetType=1` 覆盖 Token 类资产，NFT 目前还未进入估值逻辑。后续版本会单独拆分 NFT 估值 API，请关注官方里程碑。

**Q3：一条链半小时还没返回结果，正常吗？**  
A：罕见，但可能因链上大数据扫描导致超时。  
- 建议把 `chains` 拆分为多并发请求再汇总；  
- 或采用服务器缓存+增量扫描策略。

**Q4：接口是否限流？**  
A：当前默认 120 req/60s。团队套餐可在仪表盘申请扩容。

**Q5：为何 decimal 精度这么高？能否自定义？**  
A：为了支持极小数目的 meme token，系统保留 18 位，客户端直接使用 `toFixed(2)` 截断即可。

**Q6：有新链需要手动配置吗？**  
A：主网无需任何配置，一旦官方节点完成同步，就会自动纳入扫描范围。

---

## 总结与下一步

只需一条 GET 请求，就能在 **Web3 钱包 API** 中完成 **账户总资产估值**，结合 **链上信息查询** 和 **垃圾空投反垃圾策略**，让资产展示既快又准。  
建议在本地留存一个 JSON-Schema 定义的 mock 数据，前端即可零依赖开发，待真实秘钥下来一次性替换上线，体验顺畅且安全。

如需进一步收口 **收益追踪、跨链清算或闪电贷风控** 等高级能力，下一步可接入 `net-orderbook` 与 `portfolio-api` 两条子服务。祝开发顺利！